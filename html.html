<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test</title> <!--Название сайта-->
    <style>
        .error {
            background-color: rgba(255, 0, 51, 0.548);
        }
        .cen {
            display: flex;
            margin-bottom: 5px;
        }
        body {
            display: flex;
            margin-bottom: 5px;
            color: var(--tg-theme-text-color); /* Установка цвета текста из telegram */
            background: var(--tg-theme-bg-color); /* Установка цвета фона из telegram */
        }
    </style>
</head>
<body>
    <div id="Menu" style="display: block;">
        <button onclick='registr()'>Зарегистрироваться</button>
    </div>
    <div id="reg" style="display: none;">
        <h1>Регистрация</h1>
        <input type="text" class="cen" id="inp_name"> <!--Поле ввода-->
        <input type="text" class="cen" id="inp_phone">
        <input type="text" class="cen" id="inp_email">
        <button onclick="close_web()" class="cen">click</button>
        <h6 class="error" id="err"></h6>
    </div>
    <script src="https://telegram.org/js/telegram-web-app.js"></script> <!--Подключение функций telegram-->
    <script>
        let tg = window.Telegram.WebApp; // Телеграмм функции
        tg.expand(); // Открыть на весь экран

        function registr() {
            document.getElementById('Menu').style.display = 'none';
            document.getElementById('reg').style.display = 'block';
        }

        function close_web() {
            let pr = document.getElementById('input_name').value;
            if(pr == '' || pr.includes(' ')) {
                return;
            }
            let pr2 = document.getElementById('input_phone').value;
            if(pr2 == '' || !pr2.includes('+')) {
                return;
            }
            let pr3 = document.getElementById('input_email').value;
            if(pr3 == '' || !pr3.includes('@') || !pr3.includes('.')) {
                return;
            }

            let inp_name = document.getElementById('inp_name').value; // Получение данных из поле ввода
            let inp_phone = document.getElementById('inp_phone').value;
            let inp_email = document.getElementById('inp_email').value;
            let data = {
                inp_name: inp_name,
                inp_phone: inp_phone,
                inp_email: inp_email
            }; // json
            tg.sendData(JSON.stringify(data)); // переводим в 1 строку
            tg.close(); // Закрываем telegram
        } // Обработка кнопки
    </script>
</body>
</html>
